# Sesam Deployer GitHub Action

This GitHub Action enables you to deploy secrets, variables, and configurations to a Sesam node.

## Usage

```yaml
name: Deploy Configuration

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v2
      
    - name: Deploy Configuration
      uses: 3lvia/sesam-deployer-github-action@v1
      with:
        node: ${{ secrets.NODE }}
        jwt: ${{ secrets.JWT }}
        dry_run: true
        write_summary: false
        force_config: false
        replace_secrets: false
        secrets_file: secrets.json
        variables_file: variables.json
        use_whitelist: false
        config_folder: node/

```

## Inputs

#### `node`

**Description:** The hostname of the Sesam node where the deployment will occur.  
**Example:** `datahub-asdfasdf.sesam.cloud`  
**Required:** Yes

#### `jwt`

**Description:** The JWT authorization token generated by the Sesam portal.  
**Required:** Yes

#### `dry_run`

**Description:** Simulate the deployment process without making actual changes.  
**Valid Values:** `true` or `false`  
**Default:** `true`  
**Required:** No

#### `write_summary`

**Description:** If set to true, the github action will write all logs to the GITHUB_STEP_SUMMARY.  
**Valid Values:** `true` or `false`  
**Default:** `false`  
**Required:** No

#### `force_config`

**Description:** Whether to force the deployment of configurations even if validation fails.  
**Valid Values:** `true` or `false`  
**Default:** `false`  
**Required:** No

#### `replace_secrets`

**Description:** Replace all existing secrets in the node with the provided secrets file.  
**Valid Values:** `true` or `false`  
**Default:** `false`  
**Required:** No

#### `secrets_file`

**Description:** The path to a JSON file containing secrets to be deployed.  
**Required:** No  

#### `variables_file`

**Description:** The path to a JSON file containing variables to be deployed.  
**Required:** No  

#### `config_folder`

**Description:** The base path where configuration files are located.  
**Default:** `node/`  
**Required:** Yes 
**Note:** Only valid JSON files ending in .conf.json within the folders pipes/ and systems/ will be added.  

#### `use_whitelist`

**Description:** If set to true, reads configuration files as defined in `config_root/deployment/whitelist.txt` file.  
**Valid Values:** `true` or `false`  
**Default:** `false`  
**Required:** No


## Outputs

This action does not produce any outputs.
